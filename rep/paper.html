<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-06-10 Mon 18:01 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Analyzing the categories of the Kanseki Repository</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Christian Witterm" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="ox-content">
<h1 class="title">Analyzing the categories of the Kanseki Repository</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org9172e72">1. Overview</a></li>
<li><a href="#org79badfd">2. Method</a>
<ul>
<li><a href="#org773c0ac">2.1. The vocabulary list</a></li>
<li><a href="#orgf334157">2.2. From list to network</a></li>
</ul>
</li>
<li><a href="#org42a7768">3. Evaluation</a>
<ul>
<li><a href="#org479df23">3.1. Self/other score</a></li>
<li><a href="#orgabfdf87">3.2. Network analysis: Community detection</a></li>
</ul>
</li>
<li><a href="#org1230bea">4. Bibliograpy</a></li>
</ul>
</div>
</div>

<div id="outline-container-org9172e72" class="outline-2">
<h2 id="org9172e72"><span class="section-number-2">1</span> Overview</h2>
<div class="outline-text-2" id="text-1">
<p>
In this paper, an attempt is made to see how the traditional
categories for classifying literature in China compare to an
analysis of the digital text in these categories.  The research is
done using the Kanseki Repository as an example.
</p>
</div>
</div>

<div id="outline-container-org79badfd" class="outline-2">
<h2 id="org79badfd"><span class="section-number-2">2</span> Method</h2>
<div class="outline-text-2" id="text-2">
<p>
Most of the texts in the KR are not punctuated, and none of them are
tokenized. To eliminate the problem of tokenization, for this
research the tool sentencepiece is used.
</p>

<p>
Sentencepiece, developped by researchers at Google, Inc., uses
stochastic methods to find the n most frequent adjoining character
strings in a text.  These adjoining strings, which are not words in
any linguistic sense, are called "sentencepiece".  In a training
run, the tool will analyse the text and build a model of the text,
including a list of the vocabulary (e.g. sentencepieces), which
provides the pieces and the frequency of occurrence in the text
corpus.  This model can than be used to tokenize new texts into
sentencepieces, the usual use case for this is building a pipeline
for natural language processing. In this paper, however, the
vocabulary lists will be used as a proxy for characteristics of the
texts for comparison.
</p>

<p>
Apart from providing the text, the only piece of configuration
needed for building the models, and the only one used here is the
desired number of entries for the vocabulary list.  The number of
unique Kanji in the texts is usually around 11000, so the list
should have more entries.  In preparatory experiments, numbers
ranging from 30000 to 120000 have been used, but it turned out that
such large numbers are not productive, so for the run described
here, only sizes of 30000 and 20000 have been used, to gauge what
influence the vocabulary size might have on the outcome.
</p>
</div>

<div id="outline-container-org773c0ac" class="outline-3">
<h3 id="org773c0ac"><span class="section-number-3">2.1</span> The vocabulary list</h3>
<div class="outline-text-3" id="text-2-1">
<p>
The KR is organized in 6 large categories, which each have
subcategories of varying numbers, altogether there are 75
subcategories. Models have been builded separately for all
categories with both vocabulary sizes.  The resulting lists of 75
vocabulary lists in each run have then been consolidated into one
global list of all sentencepieces in the corpus.
</p>

<p>
For each of these entries in the list, we recorded wich
subcategories contained the entry.  Some of the entries occur in all
75 subcategories, while most are only recorded in one.  The number
of co-occurrences across subcategories can be seen as an indicator
of how specific or common a sentencepiece is.  Figure 1 and 2 show a
histogram of distributions<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup>.
</p>


<div id="orgac98399" class="figure">
<p><img src="./vsize-hist-30000.png" alt="vsize-hist-30000.png" height="200px" />
</p>
<p><span class="figure-number">Figure 1: </span>Vocabulary size distribution for vs=30000</p>
</div>


<div id="org0002360" class="figure">
<p><img src="./vsize-hist-20000.png" alt="vsize-hist-20000.png" height="200px" />
</p>
<p><span class="figure-number">Figure 2: </span>Vocabulary size distribution for vs=20000</p>
</div>
</div>
</div>


<div id="outline-container-orgf334157" class="outline-3">
<h3 id="orgf334157"><span class="section-number-3">2.2</span> From list to network</h3>
<div class="outline-text-3" id="text-2-2">
<p>
There are many ways to combine the vocabulary lists to form a network.  Here we will consider every subcategory 部類 as a node, co-occurrence of two items in the vocabulary lists of two subcategory as an edge.  The weight of this edge again can be calculated in different ways. Here we consider three possibilities:
</p>
<ul class="org-ul">
<li><b>Count</b>: Co-occurrences are simply counted: For every co-occurrence the
weight counter for the edge between a node-pair is increased.</li>
<li><b>Prob.</b>: Probabilities of the two sentencepieces, as they occur in their
respective subcategory. Here we simply add these probabilities.</li>
<li><b>Pos</b>: Position of the sentencepieces in the vocabulary list.  Since the
vocabulary list is sorted by probability, the position is an
indicator of the probability, but increases much faster than the
probability, thus we increase the scale, although in a non-linear
manner.  Here we assign the highest value to the first position
and then decrease for every piece in the list.  The combined value
for position is the mean of the individual values.</li>
</ul>

<p>
In addition to using various values of weight for the network edges,
we can also limit the edges based on how many subcategories they occur
in.  In the terms of Figure 1 and 2, we can consider an edge only
relevant if it occurs more frequent or less frequent than a
tresholds. We use different upper and lower limits, to see how the
relative frequency of the co-occurrence contributes to forming a
meaningful network.
</p>
</div>
</div>
</div>

<div id="outline-container-org42a7768" class="outline-2">
<h2 id="org42a7768"><span class="section-number-2">3</span> Evaluation</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org479df23" class="outline-3">
<h3 id="org479df23"><span class="section-number-3">3.1</span> Self/other score</h3>
<div class="outline-text-3" id="text-3-1">
<p>
It is difficult to evaluate the results of these calculations.  As
preliminary result, we did 18 calculations for different values of
vocabulary size (20000 and 30000), upper and lower limits (70/35,
30/5, 3/1) and combined this with the above mentioned score for the
weight of edges.  Based on the proximity, for every subcategory, we
list the 10 closest subcategories.  As a first approximation (and
since this is relative easy calculated), we consider how many
subcategories from the same category for a given subcategory.  From
this, we produced 18 tables that list the Self/Other score and the 10
top subcategories for each of the values.
For all subcategories 部類 in a category 部, for the 10 most similar
subcategories, a same/other calculation is performed, the maximal
score is thus 10 times the number of the subcategories for a given
category.
</p>

<p>
In addition, to get a better overview, we created <a href="sp-self-other-results.html">summary tables</a> for
all 6 top categories.  These tables show how they perform in each
calculation and allow for easier comparison.
</p>
</div>
</div>

<div id="outline-container-orgabfdf87" class="outline-3">
<h3 id="orgabfdf87"><span class="section-number-3">3.2</span> Network analysis: Community detection</h3>
<div class="outline-text-3" id="text-3-2">
<p>
There are many ways to detect communities, that is, sub-networks with a strong mutual relation.  Here we will use the louvain algorithm[1], which proved to be the best performing algorithm in [2]
</p>
</div>
</div>
</div>




<div id="outline-container-org1230bea" class="outline-2">
<h2 id="org1230bea"><span class="section-number-2">4</span> Bibliograpy</h2>
<div class="outline-text-2" id="text-4">
<p>
[1] Blondel et.al (2008) <a href="https://pdfs.semanticscholar.org/b434/c0199bbf38163abd5f995e76aa1619d39db9.pdf">Fast unfolding of communities in large networks</a>
</p>

<p>
[2] Emmons et. al. (2016) <a href="https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0159161">Analysis of Network Clustering Algorithms and Cluster Quality Metrics at Scale</a>
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara">In both cases, the values for 1 to 4 have been cut off to avoid distortion of the graph.</div></div>


</div>
</div></div>
<div id="ox-postamble" class="status">
<p class="author">Author: Christian Witterm</p>
<p class="date">Created: 2019-06-10 Mon 18:01</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
